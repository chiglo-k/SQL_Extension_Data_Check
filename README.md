# SQL_Extension_Data_Check

Данное решение представляет собой практическую структуру обработки данных, при котором в базе данных присутствует названия файлов и пропуски в них, это поможет пользователю в исправлении датасетов, так как при работе происходят случаи при которых данные не заполняются в виду различных обстоятельств ( нет данных, нет информации, происходит редакция информации в будущем и т.д).
При этом из-за большого кол-ва добавляемой в день информации, и кол-ве пользователей, данные могут затеряться и остаться незаполненными. Что является большой проблемой особенно в контексте заполнения данных во временном промежутке в несколько месяцев и тд.


Структура проекта представлена следующими файлами:
1.	analyze-data.sql: представляет собой пример скриптов применения расширения missing_data_check;
2.	init.sql: файл для инициализации тестовых данных и применения расширения;
3.	missing_data_check.control: файл .control является частью системы расширений PostgreSQL;
4.	missing_data_check--1.0.sql: содержит основную логику расширения для анализа пропуска в данных (содержит функцию на python);
5.	Dockerfile: содержит инструкцию для развертывания PostgreSQL, python с тестовыми данными.
Запуск docker образа происходит с помощью следующей команды из корня проекта:

  `docker build -t postgres-with-missing-data-check .`
  
  `docker run -d --name postgres-missing-data -e POSTGRES_PASSWORD=sql123 -p 5433:5432 postgres-with-missing-data-check ».
После запуска образа , к нему можно подключиться через localhost:5433  -u postgres  -p sql123`
 

Основные функции расширения
Расширение предоставляет следующие функции:

1.	data_quality.save_missing_data_results(table_name TEXT, exclude_columns TEXT[] DEFAULT NULL)
   
o	Проверяет указанную таблицу на наличие NULL значений

o	Сохраняет информацию о пропущенных данных в таблицу data_quality.missing_data_results

o	Возвращает количество найденных записей с пропущенными данными

2.	data_quality.get_current_datetime()
   
o	Возвращает текущую дату и время


Результаты проверок сохраняются в таблице data_quality.missing_data_results со следующей структурой:
Остальные скрипты для создания таблиц и ввода тестовых данных представлены в init.sql

Данные в таблицу data_quality.missing_data_results добавляются только при явном вызове функции data_quality.save_missing_data_results()
Результат проверок будет представлен в виде названия файла, названия колонки , таблицы и кол-ва пропусков. 

